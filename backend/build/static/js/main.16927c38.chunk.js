(this.webpackJsonpspotlight=this.webpackJsonpspotlight||[]).push([[0],{114:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),l=a(32),o=a.n(l),s=(a(86),a(13)),i=a(14),c=a(15),d=a(16),u=(a(87),a(88),a(27)),h=a.n(u),m=(a(42),function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(s.a)(this,a),(r=e.call(this,t)).chartRef=Object(n.createRef)(),r}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"myChart",ref:this.chartRef}))}},{key:"componentDidMount",value:function(){var t=this.props,e=t.labels,a=t.data,n=t.label,r=t.color,l=this.chartRef.current.getContext("2d");this.myChart=new h.a(l,{type:"line",data:{labels:e,datasets:[{label:n,data:a,pointHoverBorderWidth:5,pointRadius:3.5,pointBorderWidth:2,borderColor:r,pointBackgroundColor:"#FFFFFF",pointBorderColor:r,pointHoverBackgroundColor:r,pointHoverBorderColor:r}]},options:{responsive:!0,maintainAspectRatio:!1,aspectRatio:1,elements:{line:{tension:0}},legend:{display:!1},scales:{xAxes:[{type:"time"}]},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}})}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.labels,a=t.data,n=t.label,r=t.color,l=this.chartRef.current.getContext("2d"),o=l.canvas.height;this.myChart.data.labels=e,this.myChart.data.datasets[0].data=a,this.myChart.data.datasets[0].label=n;var s=l.createLinearGradient(0,0,0,o),i=[r.substring(1,3),r.substring(3,5),r.substring(5,7)],c="rgba(".concat(i.map((function(t){return parseInt(t,16)})).join(),", 0.25)"),d="rgba(".concat(i.map((function(t){return parseInt(t,16)})).join(),", 0.0)");s.addColorStop(0,c),s.addColorStop(1,d),this.myChart.data.datasets[0].backgroundColor=s,this.myChart.resetZoom(),this.myChart.update()}}]),a}(n.Component)),b=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={title:"",chartData:[],chartLabels:[],label:"",Component:m},n}return Object(i.a)(a,[{key:"fetchData",value:function(t,e,a){var n=this;fetch(t).then((function(t){return t.json()})).then((function(t){var r=JSON.parse(t),l=r[e],o=r[a];n.setState({chartLabels:l,chartData:o})}))}},{key:"componentDidMount",value:function(){var t=this.props,e=t.title,a=t.label,n=t.component;this.setState({title:e,label:a,Component:n})}},{key:"render",value:function(){var t=this.state,e=(t.title,t.chartData),a=t.chartLabels,n=t.label,l=t.Component;return r.a.createElement(l,{data:e,labels:a,label:n,color:"#28B1FA"})}}]),a}(n.Component),f=a(119),p=a(120),v=a(123),g=(a(112),function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){return Object(s.a)(this,a),e.call(this,t)}return Object(i.a)(a,[{key:"render",value:function(){var t=this.props,e=t.nbSongs,a=t.nbMinutes,n=t.avgMinutes;return r.a.createElement(f.a,{mb:4},r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"gradient-1 shadow-sm rounded-lg"},r.a.createElement(v.a.Body,null,r.a.createElement("center",null,r.a.createElement("b",null," Total Tracks "),r.a.createElement("h4",{className:"font-weight-bold"}," ",e," "))))),r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"gradient-2 shadow-sm rounded-lg"},r.a.createElement(v.a.Body,null,r.a.createElement("center",null,r.a.createElement("b",null," Total Minutes "),r.a.createElement("h4",{className:"font-weight-bold"}," ",a," "))))),r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"gradient-3 shadow-sm rounded-lg"},r.a.createElement(v.a.Body,null,r.a.createElement("center",null,r.a.createElement("b",null," Minutes Average "),r.a.createElement("h4",{className:"font-weight-bold"}," ",n," "))))))}}]),a}(n.Component)),y=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={nbSongs:0,nbMinutes:0,avgMinutes:0},n}return Object(i.a)(a,[{key:"fetchData",value:function(t){var e=this;fetch("/get/tracks-listened?dayOffset=".concat(t)).then((function(t){return t.json()})).then((function(t){e.setState({nbSongs:t.tracks_listened})})),fetch("/get/min-listened?dayOffset=".concat(t)).then((function(t){return t.json()})).then((function(t){e.setState({nbMinutes:t.min_listened})})),fetch("/get/avg-min-listened?dayOffset=".concat(t)).then((function(t){return t.json()})).then((function(t){e.setState({avgMinutes:t.avg_min_listened})}))}},{key:"componentDidMount",value:function(){var t=this.props.period;this.fetchData(t)}},{key:"render",value:function(){var t=this.state,e=t.nbSongs,a=t.nbMinutes,n=t.avgMinutes;return r.a.createElement(g,{nbSongs:e,nbMinutes:a,avgMinutes:n})}}]),a}(n.Component),E=a(121),C=a(78),O=a(39),j=a(79),k=a(37),L=(a(113),n.Component,function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(s.a)(this,a),(r=e.call(this,t)).chartRef=Object(n.createRef)(),r}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"myChart",ref:this.chartRef}))}},{key:"componentDidMount",value:function(){var t=this.props,e=t.labels,a=t.data,n=t.label,r=t.color,l=this.chartRef.current.getContext("2d");this.myChart=new h.a(l,{type:"polarArea",data:{labels:e,datasets:[{label:n,data:a,borderColor:r,borderWidth:1,hoverBorderColor:r,hoverBorderWidth:2},{data:[],borderColor:"rgba(200, 200, 200, 0.05)",borderWidth:1,hoverBorderColor:"rgba(200, 200, 200, 0.05)",hoverBorderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,aspectRatio:1,legend:{display:!1},tooltips:{enabled:!1},hover:{animationDuration:0},scale:{gridLines:{display:!1},ticks:{min:0,max:1.3,display:!1}},animation:{duration:1,onComplete:function(){var t=this.chart;l.font="15px Arial",l.textAlign="right",l.textBaseline="bottom",l.fillStyle="#fff";var e=0;t.controller.getDatasetMeta(0).data.forEach((function(t){parseFloat(t._model.outerRadius)>e&&(e=parseFloat(t._model.outerRadius))})),t.controller.getDatasetMeta(0).data.forEach((function(t){var a=(t._model.startAngle+t._model.endAngle)/2,n=(e+15)*Math.cos(a)+t._model.x,r=(e+15)*Math.sin(a)+t._model.y+10;l.fillText(t._model.label,n,r)}))}}}})}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.labels,a=t.data,n=t.label,r=t.color,l=this.chartRef.current.getContext("2d"),o=l.canvas,s=o.height,i=o.width;this.myChart.data.labels=e,this.myChart.data.datasets[0].data=a,this.myChart.data.datasets[0].label=n;var c=l.createRadialGradient(i/2,s/2,0,i/2,s/2,i/4),d=[r.substring(1,3),r.substring(3,5),r.substring(5,7)],u="rgba(".concat(d.map((function(t){return parseInt(t,16)})).join(),", 0.75)"),h="rgba(".concat(d.map((function(t){return parseInt(t,16)})).join(),", 0.0)");c.addColorStop(0,u),c.addColorStop(1,h),this.myChart.data.datasets[0].backgroundColor=c,this.myChart.data.datasets[0].hoverBackgroundColor=c;var m=new Array(a.length).fill(1);this.myChart.data.datasets[1].data=m,this.myChart.update()}}]),a}(n.Component)),x=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){return Object(s.a)(this,a),e.call(this,t)}return Object(i.a)(a,[{key:"render",value:function(){var t=this.props,e=t.listData,a=t.listLabels,n=t.col1Label,l=t.col2Label;return console.log(e),r.a.createElement(E.a,null,r.a.createElement(f.a,{mb:4},r.a.createElement(p.a,{xs:8},r.a.createElement("b",null,n)),r.a.createElement(p.a,{xs:4},r.a.createElement("b",{class:"float-right"},l))),a.map((function(t,a){return r.a.createElement(f.a,{key:a,mb:4},r.a.createElement(p.a,{xs:8},r.a.createElement("b",null,a+1,". ",t)),r.a.createElement(p.a,{xs:4},r.a.createElement("div",{class:"float-right"},e[a])))})))}}]),a}(n.Component),D=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={listData:[],listLabels:[],col1Label:"",col2Label:""},n}return Object(i.a)(a,[{key:"fetchData",value:function(t,e,a){var n=this;fetch(t).then((function(t){return t.json()})).then((function(t){var r=JSON.parse(t),l=r[e],o=r[a];n.setState({listLabels:l,listData:o})}))}},{key:"componentDidMount",value:function(){var t=this.props,e=t.col1Label,a=t.col2Label;this.setState({col1Label:e,col2Label:a})}},{key:"render",value:function(){var t=this.state,e=t.listData,a=t.listLabels,n=t.col1Label,l=t.col2Label;return r.a.createElement(x,{listData:e,listLabels:a,col1Label:n,col2Label:l})}}]),a}(n.Component),R=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(s.a)(this,a),(r=e.call(this,t)).chartRef=Object(n.createRef)(),r}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"myChart",ref:this.chartRef}))}},{key:"componentDidMount",value:function(){var t=this.props,e=t.labels,a=t.data,n=t.label,r=t.color,l=this.chartRef.current.getContext("2d");this.myChart=new h.a(l,{type:"bar",data:{labels:e,datasets:[{label:n,data:a,borderWidth:1.5,borderColor:r,hoverBorderColor:r,hoverBorderWidth:2.75}]},options:{responsive:!0,maintainAspectRatio:!1,aspectRatio:1,legend:{display:!1},scales:{xAxes:[{type:"time",ticks:{fontColor:"#ffffff"},gridLines:{color:"rgba(200, 200, 200, 0.05)"}}],yAxes:[{ticks:{fontColor:"#ffffff"},gridLines:{color:"rgba(200, 200, 200, 0.05)"}}]},ticks:{display:!1,fontColor:"#ffffff"},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}})}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.data,a=t.labels,n=t.label,r=t.color,l=this.chartRef.current.getContext("2d"),o=l.canvas.height;this.myChart.data.datasets[0].data=e,this.myChart.data.labels=a,this.myChart.data.datasets[0].label=n;var s=l.createLinearGradient(0,0,0,o),i=[r.substring(1,3),r.substring(3,5),r.substring(5,7)],c="rgba(".concat(i.map((function(t){return parseInt(t,16)})).join(),", 0.5)"),d="rgba(".concat(i.map((function(t){return parseInt(t,16)-50})).join(),", 0)");s.addColorStop(0,c),s.addColorStop(1,d),this.myChart.data.datasets[0].backgroundColor=s,this.myChart.resetZoom(),this.myChart.update()}}]),a}(n.Component),w=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={periodText:"Last 30 days",period:30,unit:"min",selectedArtist:"None",artistsList:[]},n.recapContainerElement=r.a.createRef(),n.dailyListeningGraph=r.a.createRef(),n.topArtistList=r.a.createRef(),n.artistListeningGraph=r.a.createRef(),n.hoursGraph=r.a.createRef(),n}return Object(i.a)(a,[{key:"updatePeriod",value:function(t){var e=this.getPeriod(t.currentTarget.textContent);this.setState({periodText:t.currentTarget.textContent,period:e});var a=this.state,n=a.unit;a.selectedArtist;this.recapContainerElement.current.fetchData(e),this.dailyListeningGraph.current.fetchData("/get/daily-listened-".concat(n,"?dayOffset=").concat(e),"index","data"),this.topArtistList.current.fetchData("/get/top-artists?dayOffset=".concat(e,"&count=10"),"index","data"),this.hoursGraph.current.fetchData("/get/day-hours?dayOffset=".concat(e),"index","data")}},{key:"updateUnit",value:function(t){this.setState({unit:t});var e=this.state,a=e.period;e.selectedArtist;this.dailyListeningGraph.current.fetchData("/get/daily-listened-".concat(t,"?dayOffset=").concat(a),"index","data")}},{key:"getPeriod",value:function(t){switch(t){case"Last 30 days":return 30;case"Last 6 months":return 182;case"Last 12 months":return 365;default:return 0}}},{key:"componentDidMount",value:function(){var t=this.state,e=t.period;t.unit,t.selectedArtist;this.recapContainerElement.current.fetchData(e),this.dailyListeningGraph.current.fetchData("/get/daily-listened-min?dayOffset=".concat(e),"index","data"),this.topArtistList.current.fetchData("/get/top-artists?dayOffset=".concat(e,"&count=10"),"index","data"),this.hoursGraph.current.fetchData("/get/day-hours?dayOffset=".concat(e),"index","data")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(f.a,{mb:4},r.a.createElement(p.a,null,r.a.createElement("h4",{className:"white-title"},"Spotify Statistics")),r.a.createElement(p.a,{xs:4}),r.a.createElement(p.a,null,r.a.createElement(C.a,{variant:"btn btn-custom",className:"btn-custom mb-3 float-right  shadow-sm",title:this.state.periodText},r.a.createElement(k.a,{className:"btn btn-custom"},r.a.createElement("div",{onClick:this.updatePeriod.bind(this)},"Last 30 days")),r.a.createElement(k.a,{className:"btn btn-custom"},r.a.createElement("div",{onClick:this.updatePeriod.bind(this)},"Last 6 months")),r.a.createElement(k.a,{className:"btn btn-custom"},r.a.createElement("div",{onClick:this.updatePeriod.bind(this)},"Last 12 months"))))),r.a.createElement(y,{ref:this.recapContainerElement,period:this.state.period}),r.a.createElement("div",{class:"mt-4"}),r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"shadow-sm rounded-lg"},r.a.createElement(v.a.Body,null,r.a.createElement(E.a,{fluid:!0,className:"mb-2"},r.a.createElement(f.a,{className:"mb-2"},r.a.createElement(p.a,null,r.a.createElement("b",null,"How many ",this.state.unit," did you listen in the ",this.state.periodText.toLowerCase(),"?"),r.a.createElement("hr",null)),r.a.createElement(p.a,null,r.a.createElement("div",{className:"float-right "},"Statistics based on: \xa0",r.a.createElement(j.a,{type:"radio",name:"options",defaultValue:"min",onChange:this.updateUnit.bind(this)},r.a.createElement(O.a,{value:"tracks",className:"btn-custom border"},"Tracks"),r.a.createElement(O.a,{value:"min",className:"btn-custom border"},"Minutes")))))),r.a.createElement(b,{component:R,ref:this.dailyListeningGraph,label:this.state.unit}))))),r.a.createElement("div",{class:"mt-4"}),r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"shadow-sm h-100 rounded-lg"},r.a.createElement(v.a.Body,null,r.a.createElement(E.a,{fluid:!0,className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement("b",null,"Top Artists over the ",this.state.periodText.toLowerCase()),r.a.createElement("hr",null)))),r.a.createElement(D,{ref:this.topArtistList,col1Label:"Artist",col2Label:"min. played"})))),r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"shadow-sm h-100 rounded-lg"},r.a.createElement(v.a.Body,null,r.a.createElement(E.a,{fluid:!0,className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement("b",null,"Listening Hours"),r.a.createElement("hr",null)))),r.a.createElement(b,{component:L,ref:this.hoursGraph,label:this.state.unit}))))),r.a.createElement("div",{class:"mt-4"})))}}]),a}(n.Component),S=function(t){Object(d.a)(a,t);var e=Object(c.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(w,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},81:function(t,e,a){t.exports=a(114)},86:function(t,e,a){},88:function(t,e,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.16927c38.chunk.js.map